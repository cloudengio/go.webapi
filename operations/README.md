# Package [cloudeng.io/webapi/operations](https://pkg.go.dev/cloudeng.io/webapi/operations?tab=doc)

```go
import cloudeng.io/webapi/operations
```

Package operations provides support for invoking various operations on web
APIs.

## Types
### Type Auth
```go
type Auth interface {
	// WithAuthorization adds an authorization header or other required
	// authorization information to the provided http.Request.
	WithAuthorization(context.Context, *http.Request) error
}
```
Auth represents an authorization mechanism.


### Type Endpoint
```go
type Endpoint[T any] struct {
	// contains filtered or unexported fields
}
```
Endpoint represents an API endpoint that whose response body is unmarshaled,
by default using json.Unmarshal, into the specified type.

### Functions

```go
func NewEndpoint[T any](url string, opts ...Option) *Endpoint[T]
```
NewEndpoint returns a new endpoint for the specified type and URL.



### Methods

```go
func (ep *Endpoint[T]) Get(ctx context.Context) (T, []byte, error)
```
Get invokes a GET request on this endpoint (without a body).


```go
func (ep *Endpoint[T]) GetWithBody(ctx context.Context, body io.Reader) (T, []byte, error)
```
Get invokes a Get request on this endpoint but with a body.




### Type Error
```go
type Error struct {
	Err        error
	Status     string
	StatusCode int
	Attempts   int
}
```

### Methods

```go
func (err *Error) Error() string
```




### Type Option
```go
type Option func(o *options)
```
Option represents an option that can be used when creating new Endpoints and
Streams.

### Functions

```go
func WithAuth(a Auth) Option
```
WithAuth specifies the instance of Auth to use when making requests.


```go
func WithRateController(rc *ratecontrol.Controller, statusCodes ...int) Option
```
WithRateController sets the rate controller to use to enforce rate control
and backoff.


```go
func WithUnmarshal(u Unmarshal) Option
```
WithUnmarshal specifies a custom unmarshaling function to use for decoding
response bodies. The default is json.Unmarshal.




### Type Paginator
```go
type Paginator[T any] interface {
	// Next is called with the returned type and response for that operation.
	// The first URL to use in a scan is generated by calling Next with an empty
	// payload and nil *http.Response
	Next(t T, r *http.Response) (url string, body io.Reader, done bool, err error)
}
```
Paginator represents the ability to generate the next request (URL with
optional body) given the response from the previous request.


### Type Scanner
```go
type Scanner[T any] struct {
	// contains filtered or unexported fields
}
```
Scanner provides the ability to iterate over a paginated API a page at a
time.

### Functions

```go
func NewScanner[T any](pagintator Paginator[T], opts ...Option) *Scanner[T]
```
NewScanner creates a new Scanner using the supplied paginator. The options
are used to create the underlying Endpoint.



### Methods

```go
func (sc *Scanner[T]) Body() []byte
```
Body returns the body for the current page.


```go
func (sc *Scanner[T]) Err() error
```
Err returns the first error encountered during scanning.


```go
func (sc *Scanner[T]) Response() T
```
Response returns the response for the current page.


```go
func (sc *Scanner[T]) Scan(ctx context.Context) bool
```
Scan iterates over the paginated API. It returns true if there is another
page to scan, false otherwise.




### Type Unmarshal
```go
type Unmarshal func([]byte, any) error
```
Unmarshal represents a function that can be used to unmarshal a response
body.





